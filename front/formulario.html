<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Asistentes al Evento</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h2 class="text-center mb-0">Registro de Asistentes al Evento</h2>
                    </div>
                    <div class="card-body">
                        <form action="../back/procesarEvento.php" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate><!-- Formulario que envía datos a través de método POST a procesar_evento.php, con carga para archivos. Sin class="needs-validation" novalidate" la validación de Bootstrap NO funciona -->
                            
                            <!-- Sección 1: Información Personal -->
                            <h4 class="mb-3 text-primary">Información Personal</h4>
                            <div class="form-group">
                                <label for="nombre" class="form-label">Nombre completo</label>
                                <input type="text" class="form-control" id="nombre" name="nombre" required>
                                <div class="invalid-feedback"> <!-- Mensaje de error que se muestra si la validación falla -->
                                    Por favor, ingrese su nombre completo.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="email" class="form-label">Correo electrónico</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese un correo electrónico válido.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="telefono" class="form-label">Número de teléfono</label>
                                <input type="tel" class="form-control" id="telefono" name="telefono" required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese su número de teléfono.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="fecha_nacimiento" class="form-label">Fecha de nacimiento</label>
                                <input type="date" class="form-control" id="fecha_nacimiento" name="fecha_nacimiento" required>
                                <div class="invalid-feedback">
                                    Por favor, seleccione su fecha de nacimiento.
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Género</label>
                                <div>
                                    <div class="form-check form-check-inline"> <!-- Contenedor de botón circular en línea horizontal -->
                                        <input class="form-check-input" type="radio" name="genero" id="masculino" value="Masculino" required> <!-- Es botón circular -->
                                        <label class="form-check-label" for="masculino">
                                            Masculino
                                        </label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="genero" id="femenino" value="Femenino" required>
                                        <label class="form-check-label" for="femenino">
                                            Femenino
                                        </label>
                                    </div>
                                    <div class="invalid-feedback d-block" id="genero-error" style="display: none !important;">  <!-- Mensaje de errorsi no se selecciona botón circular -->
                                        Por favor, seleccione su género.
                                    </div>
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Sección 2: Información del Evento -->
                            <h4 class="mb-3 text-primary">Información del Evento</h4>
                            <div class="form-group">
                                <label for="fecha_evento" class="form-label">Fecha del evento</label>
                                <input type="date" class="form-control" id="fecha_evento" name="fecha_evento" required>
                                <div class="invalid-feedback">
                                    Por favor, seleccione la fecha del evento.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="tipo_entrada" class="form-label">Tipo de entrada</label>
                                <select class="form-control" id="tipo_entrada" name="tipo_entrada" required>
                                    <option value="" selected disabled>Seleccione una opción</option>
                                    <option value="General">General</option>
                                    <option value="VIP">VIP</option>
                                    <option value="Estudiante">Estudiante</option>
                                </select>
                                <div class="invalid-feedback">
                                    Por favor, seleccione un tipo de entrada.
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Preferencias de comida</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="comida[]" value="Vegetariano" id="vegetariano">
                                    <label class="form-check-label" for="vegetariano">
                                        Vegetariano
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="comida[]" value="Vegano" id="vegano">
                                    <label class="form-check-label" for="vegano">
                                        Vegano
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="comida[]" value="Sin gluten" id="sin_gluten">
                                    <label class="form-check-label" for="sin_gluten">
                                        Sin gluten
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="comida[]" value="Sin preferencias" id="sin_preferencias">
                                    <label class="form-check-label" for="sin_preferencias">
                                        Sin preferencias
                                    </label>
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Sección 3: Información de Acceso -->
                            <h4 class="mb-3 text-primary">Información de Acceso</h4>
                            <div class="form-group">
                                <label for="nombre-usuario" class="form-label">Nombre de usuario</label>
                                <input type="text" class="form-control" id="nombre-usuario" name="nombre-usuario" required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese un nombre de usuario.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="contraseña" class="form-label">Contraseña</label>
                                <input type="password" class="form-control" id="contraseña" name="contraseña" required>
                                <div class="invalid-feedback">
                                    Por favor, ingrese una contraseña.
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="confirmacion-contraseña" class="form-label">Confirmación de contraseña</label>
                                <input type="password" class="form-control" id="confirmacion-contraseña" name="confirmacion-contraseña" required>
                                <div class="invalid-feedback">
                                    Por favor, confirme su contraseña.
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Sección 4: Preferencias de Contacto -->
                            <h4 class="mb-3 text-primary">Preferencias de Contacto</h4>
                            <div class="form-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="notificaciones" value="Si" id="notificaciones">
                                    <label class="form-check-label" for="notificaciones">
                                        ¿Desea recibir notificaciones por correo electrónico?
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="terminos" value="Aceptado" id="terminos" required>
                                    <label class="form-check-label" for="terminos">
                                        ¿Acepta los términos y condiciones? (Obligatorio)
                                    </label>
                                    <div class="invalid-feedback"> <!--obliga a que siempre tenga que aceptar los terminos y lo marca como error-->
                                        Debe aceptar los términos y condiciones para continuar.
                                    </div>
                                </div>
                            </div>

                            <hr class="my-4">

                            <!-- Sección 5: Encuesta Adicional -->
                            <h4 class="mb-3 text-primary">Encuesta Adicional</h4>
                            <div class="form-group">
                                <label for="calificacion" class="form-label">Calificación de eventos anteriores: <span id="valor_calificacion">5</span></label> <!-- Etiqueta con span para mostrar valor actual del deslizador -->
                                <input type="range" class="form-range" min="1" max="10" step="1" id="calificacion" name="calificacion" value="5"> <!-- Indica el valor minimo que puede tener el deslizador, 1, el maximo, 10, el incremento, de 1 en 1 y el valor por defecto que es 5 -->
                            </div>

                            <div class="form-group">
                                <label for="comentarios" class="form-label">Comentarios adicionales</label>
                                <textarea class="form-control" id="comentarios" name="comentarios" rows="6" placeholder="Escriba sus comentarios aquí..."></textarea> <!-- Textarea para texto multilínea con 6 filas visibles y placeholder -->
                            </div>
                    

                            <hr class="my-4">

                            <!-- Sección 6: Adjuntar archivo -->
                            <h4 class="mb-3 text-primary">Documentos</h4>
                            <div class="form-group">
                                <label for="archivo" class="form-label">Adjuntar un archivo</label>
                                <input class="form-control" type="file" id="archivo" name="archivo">
                            </div>

                            <!-- Botón de envío -->
                            <div class="d-grid">
                                <button class="btn btn-primary btn-lg" type="submit">Enviar Registro</button>
                            </div>
                        </form>
                </div>   
            </div>
        </div>
    </div>

    









    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Actualizar valor del deslizador
        // Sin esto el slider funcionaria, pero no se vería actualizado el número mientras lo movemos por el deslizador.
        const entradaRango = document.getElementById('calificacion');
        const valorRango = document.getElementById('valor_calificacion');

        entradaRango.addEventListener('input', function() { //Cuando el usuario mueva el deslizador ejecuta el codigo
            valorRango.textContent = this.value; //cambia el texto dentro del span= obtiene el valor actual del deslizador
        });


        
        // Validación de Bootstrap
        //Sin esto el formulario se enviaria aunque no estuviera bien rellenado. No aparecerían los mensajes de error con el estilo de Bootstrap.
        (function() {
            'use strict'; //No sería necesario, pero lo ponemos como un modo estricto de JavaScript para evitar errores comunes, por ejemplo, no permite usar variables sin declararlas con const, let o var.
            const forms = document.querySelectorAll('.needs-validation');
            
            Array.from(forms).forEach(function(form) { //por cada formulario encontrado
                form.addEventListener('submit', function(event) {
                    if (!form.checkValidity()) { //Si hay errores 
                        event.preventDefault(); //cancela el envio, no envía el formulario
                        event.stopPropagation(); //Detiene la propagacion a los elementos padre
                    }
                    form.classList.add('was-validated'); //añade la clasepara mostrar mensajes de error y los bordes rojo
                });
            });
        })();
    </script>
</body>
</html>